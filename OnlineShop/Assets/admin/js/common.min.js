function DateDiff(n,t,i){var f,e,r,u;return i==1?(f=new Date(n),e=new Date(n)):i==2&&(r=n.split("/"),u=t.split("/"),f=new Date(r[1]+"/"+r[0]+"/"+r[2]),e=new Date(u[1]+"/"+u[0]+"/"+u[2])),(e.valueOf()-f.valueOf())/864e5}function DateDiffTime(n,t){var u,f,i=n.split("/"),r=t.split("/");return u=new Date(i[1]+"/"+i[0]+"/"+i[2]),f=new Date(r[1]+"/"+r[0]+"/"+r[2]),(f.valueOf()-u.valueOf())/6e4}function CheckShowCustomItem(n){$("articleoffall").remove();var t=1,i=0;$("#alertify-logs > article").each(function(){t<=n?$(this).css("display","block"):$(this).css("display","none");t++});$("#alertify-logs > article").not(".alertify-log-hide").each(function(){i++})}function InitMenu3Left(){$("a[data-nameleft='menu3']").each(function(){$(this).click(function(){var n=$(this);n.parent().find(".sub-cat-n").length>0&&(n.parent().hasClass("expand")?n.parent().removeClass("expand"):n.parent().addClass("expand"))})})}function InitMenu1Click(){$("#dLabel").length>0&&$("#dLabel").click(function(){var i=parseInt($("#dLabel").attr("data-count"))+1,n,t;$("#dLabel").attr("data-count",i);n=$(this).attr("data-id");$("#divrootmenuleft").hasClass("open")||$("#divrootmenuleft").addClass("open");$("li[data-nameleft='menu1']").removeClass("hide");$("div[data-nameleft='menu2']").addClass("hide");InitMenu3Left();$("li[data-nameleft='menu1'][data-id='"+n+"']").addClass("hide");t=$("#dLabel").attr("data-count");t%2==0&&AfterClickMenu1(n)})}function BindMenuLeft(){var t="",i="",n;node=="4"?($("li[data-nameleft='menu4'][data-id='"+dataidtab+"']").length>0&&($("li[data-nameleft='menu4'][data-id='"+dataidtab+"']").hasClass("active")||($("li[data-nameleft='menu4'][data-id='"+dataidtab+"']").addClass("active"),dataidtab=$("li[data-nameleft='menu4'][data-id='"+dataidtab+"']").attr("data-parentid"))),$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").length>0&&($("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").hasClass("expand")||$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").addClass("expand"),$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").hasClass("active")||$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").addClass("active"),dataidtab=$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").attr("data-parentid")),$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").length>0&&($("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("expand")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("expand"),$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("active")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("active"),i=dataidtab,t=$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").attr("data-parentid"))):node=="3"?($("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").length>0&&($("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").hasClass("expand")||$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").addClass("expand"),$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").hasClass("active")||$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").addClass("active"),dataidtab=$("li[data-nameleft='menu3'][data-id='"+dataidtab+"']").attr("data-parentid")),$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").length>0&&($("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("expand")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("expand"),$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("active")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("active"),i=dataidtab,t=$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").attr("data-parentid"))):node=="2"&&$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").length>0&&($("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("expand")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("expand"),$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").hasClass("active")||$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").addClass("active"),i=dataidtab,t=$("div[data-nameleft='menu2'][data-id='"+dataidtab+"']").attr("data-parentid"));n=t;$("#divrootmenuleft").removeClass("open");$("div[data-nameleft='menu2']").addClass("hide");$("div[data-nameleft='menu2'][data-parentid='"+t+"']").removeClass("hide");InitMenu3Left();var r=$("li[data-nameleft='menu1'][data-id='"+n+"']").attr("data-id"),u=$("li[data-nameleft='menu1'][data-id='"+n+"']").attr("data-parentid"),f=$("li[data-nameleft='menu1'][data-id='"+n+"']").attr("data-node"),e=$("li[data-nameleft='menu1'][data-id='"+n+"']").attr("data-classcss"),o=$("li[data-nameleft='menu1'][data-id='"+n+"']").attr("data-namemenu"),s="<a style='cursor:pointer' data-count='0' id='dLabel' data-id='"+r+"' data-parentid='"+u+"' data-node='"+f+"'  class='current-items arootmenu'><span class='icon-menu'><i class='"+e+"'><\/i><\/span>"+o+"<span class='fa fa-unsorted'><\/span><\/a>";$("#divrootmenuleft").append(s)}function AfterClickMenu1(n){$("#divrootmenuleft").removeClass("open");$("div[data-nameleft='menu2']").addClass("hide");$("div[data-nameleft='menu2'][data-parentid='"+n+"']").removeClass("hide");$("#dLabel").attr("data-back",0)}function UpdateUserConfigSchol(){if($("#cboComboSchool").val()==-1)return alertify.error("Vui lòng chọn trường học!").dismissOthers(),$("#cboComboSchool").focus(),!1;if($("#cboComboSchoolYear").val()==-1)return alertify.error("Vui lòng chọn năm học!").dismissOthers(),$("#cboComboSchoolYear").focus(),!1;if($("#cboComboSchoolTerm").val()==-1)return alertify.error("Vui lòng chọn học kỳ!").dismissOthers(),$("#cboComboSchoolTerm").focus(),!1;var n=$("#cboComboSchool").val(),t=$("#cboComboSchoolYear").val(),i=$("#cboComboSchoolTerm").val(),r=$("#cboComboCurrentClass").val(),u=$("#cboComboCurrentSchoolClass").val();$.ajax({type:"POST",url:"/aj/Home/UpdateUserConfigSchol",cache:!1,data:JSON.stringify({intSchoolID:n,intSchoolYearID:t,intSchoolTermID:i,intClassID:r,intSchoolClassID:u}),contentType:"application/json",dataType:"json",beforeSend:function(){showLoadingInGrid("#popupSetting","#btnUpdateSetting")},success:function(n){hideLoadingInGrid("#popupSetting","#btnUpdateSetting");n.permission!=undefined&&n.permission==1?ShowAlertify("warning","Bạn không có quyền trên trường này!"):ShowAlertify("success","Cập nhật cấu hình mặc định thành công!");window.location.reload(!0)},error:function(){hideLoadingInGrid("#popupSetting","#btnUpdateSetting");ShowAlertify("danger","Đã có lỗi xảy ra khi thao tác. Vui lòng nhấn F5 để thực hiện lại!")}})}function ShowSetting(){$.ajax({type:"POST",url:"/aj/Home/GenHTMLPopupSetting",cache:!1,dataType:"json",beforeSend:function(){},success:function(n){n.iserror==0&&($("#popupSetting").html(n.htmlsetting),n.htmlsetting!=""&&$(".chosen-select.cbschoolsetting").chosen({no_results_text:"Không tìm thấy từ khóa ",search_contains:!0,width:"100%"}))},error:function(){}})}function ComboSchoolSettingChange(n){var i=$(n).val(),t={};t.intSchoolID=i;$.ajax({url:"/aj/Home/GenHTMLClassSetting",type:"POST",data:t,dataType:"json",success:function(n){var i='<option value="-1">-- Chọn khối học --<\/option>',t;i+=n.htmlclass;$("#cboComboCurrentClass").html(i);t='<option value="-1">-- Chọn lớp học --<\/option>';t+=n.htmlschoolclass;$("#cboComboCurrentSchoolClass").html(t)},error:function(){var n;$("#cboComboCurrentClass").html('<option value="-1">-- Chọn khối học --<\/option>');n='<option value="-1">-- Chọn lớp học --<\/option>';$("#cboComboCurrentSchoolClass").html(n)}})}function ComboClassSettingChange(n){var i=$(n).val(),t={};t.intClassID=i;t.intSchoolID=$("#cboComboSchool").val();$.ajax({url:"/aj/Home/GenHTMLComboSchoolClassSetting",type:"POST",data:t,dataType:"json",success:function(n){var t='<option value="-1">-- Chọn lớp học --<\/option>';t+=n.htmlschoolclass;$("#cboComboCurrentSchoolClass").html(t)},error:function(){}})}function Global(){}function closeMessGlobal(){objGlobal.closeMess()}function Cookie(){}function Common(){}function JWeblib(){}function startTime(){var n=new Date,t=n.getHours(),i=n.getMinutes(),r=n.getSeconds(),s;t=checkTime(t);i=checkTime(i);r=checkTime(r);document.getElementById("homeClock").innerHTML=t+":"+i;var u=n.getDate(),f=n.getMonth()+1,e=n.getFullYear(),o=n.getDay();document.getElementById("homeDate").innerHTML="<h4>"+checkTime(u)+"-"+checkTime(f)+"-"+e+"<\/h4><h3>"+getDayOfWeek(o)+"<\/h3>";s=setTimeout(function(){startTime()},500)}function checkTime(n){return n<10&&(n="0"+n),n}function getDayOfWeek(n){var t="CHỦ NHẬT";switch(n){case 1:t="THỨ HAI";break;case 2:t="THỨ BA";break;case 3:t="THỨ TƯ";break;case 4:t="THỨ NĂM";break;case 5:t="THỨ SÁU";break;case 6:t="THỨ BẢY";break;default:t="CHỦ NHẬT"}return t}function RemoveScript(n){return r=n.replace(/(<script(.|\n)*<\/script>)|(&lt;script(.|\n)*&lt;\/script&gt;)/gi,"")}function RemoveAllHtml(n){return $("#div-rm-html-tag").length==0&&$("body").append('<div id="div-rm-html-tag" style="display:none;"><\/div>'),$("#div-rm-html-tag").html(n),$("#div-rm-html-tag").text()}function HtmlEncode(n){return $("<div/>").text(n).html()}function HtmlDecode(n){return $("<div/>").html(n).text()}function showLoading(){$("#divLoading")&&$("#divLoading").addClass("la-animate")}function hideLoading(){$("#divLoading")&&setTimeout(function(){$("#divLoading").removeClass("la-animate")},300)}function showLoadingInGrid(n,t){$("<div class='grid-loader animated fadeIn show in'><\/div>").insertAfter(n);$(t).attr("disabled","disabled");$(t).attr("data-htmlold",$(t).html());$(t).html("<i class='fa icon-spinner fa-pulse'><\/i>"+$(t).attr("loading-text"))}function hideLoadingInGrid(n,t){setTimeout(function(){$(n).parent().find("div.grid-loader").remove();$(t).removeAttr("disabled");$(t).html($(t).attr("data-htmlold"))},300)}function getUrlParameter(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]}function CheckAll(n){$("input[name='"+$(n).data("taget")+"']").attr("checked",$(n).is(":checked"))}function initCheckAll(n,t){var i=!0;$("#"+n)&&$("#"+n).length>0&&((typeof $('input[name="'+t+'"]')=="undefined"||$('input[name="'+t+'"]').length==0)&&$("#"+n).attr("checked",!1),$('input[name="'+t+'"]:enabled').each(function(){$(this).is(":checked")==!1&&(i=!1)}),$("#"+n).attr("checked",i),$('input[name="'+t+'"]:enabled').click(function(){$(this).is(":checked")==!1&&$("#"+n).attr("checked",$(this).is(":checked"));i=!0;$('input[name="'+t+'"]:enabled').each(function(){$(this).is(":checked")==!1&&(i=!1)});$("#"+n)[0].checked=i}))}function SetIMGLoadPageByID(n){$("#"+n).find("img").each(function(){var n=$(window).width()-100;$(this).width()>500?(n=$(window).width()-100,n>500&&(n=500)):n=$(this).width();$(this).css("max-width",n+"px");$(this).css("cursor","all-scroll");$(this).attr("onclick","ZoomImage(this)");$(this).attr("title","Bấm vào để xem hình với kích thước thật.")})}function SetImageByID(n){$("#"+n).find("img").each(function(){var n=$(window).width()-100;$(this).width()>500?(n=$(window).width()-100,n>500&&(n=500)):n=$(this).width();$(this).css("max-width",n+"px");$(this).css("cursor","all-scroll");$(this).attr("title","Bấm vào để xem hình với kích thước thật.");$(this).attr("onclick","ZoomImage(this)")})}function InitZoomImage(n){SetIMGLoadPageByID(n);$(window).resize(function(){SetImageByID(n)})}function CloseZoom(){$(".wrapshow").hide();$(contentzoom).hide()}function ZoomImage(n){$(".wrapshow").show();var o=$(n),s=$(o).attr("src"),t=document.getElementById("contentzoom");$(t).html('<img src="'+s+'"><a title="Close" class="fancybox-close" onclick="CloseZoom()"><\/a>');$(t).show();var h=window.innerWidth,i=window.innerHeight,l=$(t).offset(),u=t.offsetHeight,r=0;u>=i&&(u=i-100,r=i-100);r>0?($(t).children("img").attr("style","height: "+r+"px;"),$(t).attr("style","top: 0px; left: 0px;")):$(t).attr("style","top: 0px; left: 0px;");$(t).show();var c=t.offsetWidth,f=(h-c)/2,e=(i-u)/2;r>0?$(t).attr("style","top: "+e+"px; left: "+f+"px;"):$(t).attr("style","top: "+e+"px; left: "+f+"px;");$(t).show()}function InitSearchInTable(n,t){$("#"+n+" table thead th:eq("+t+") span").click(function(){if($("#"+n+" table thead th:eq("+t+") span").hide(),$("#"+n+" table thead th:eq("+t+") input").length==0)$("#"+n+" table thead th:eq("+t+")").append('<input type="text" style="border:none;height:25px;width:100%;"/>');else $("#"+n+" table thead th:eq("+t+") input").show();$("#"+n+" table thead th:eq("+t+") input").focus();InitSearch(n,t)})}function InitSearch(n,t){$("#"+n+" table thead th:eq("+t+") input")&&$("#"+n+" table thead th:eq("+t+") input").keyup(function(){$.trim($("#"+n+" table thead th:eq("+t+") input").val())!=""?$("#"+n+" table tbody tr").find("td:eq("+t+")").each(function(){$(this).text().toUpperCase().indexOf($("#"+n+" table thead th:eq("+t+") input").val().toUpperCase())!=-1?$(this).parent().show():$(this).parent().hide()}):$("#"+n+" table tbody tr").show()});$("#"+n+" table thead th:eq("+t+") input")&&$("#"+n+" table thead th:eq("+t+") input").blur(function(){$("#"+n+" table thead th:eq("+t+") input").hide();$("#"+n+" table thead th:eq("+t+") span").show()})}function ShowAttachFile(n,t,i,r){showLoading();$.post("/common/ShowAttachFile",{FileName:encodeURI(n),FileID:t,FilePath:encodeURI(i),FMSApplicationID:r},function(t){var r,i;urlpdf=t.URLView;urldownload=t.URLDownLoad;$("#the-canvas img").remove();$("#the-canvas a").remove();$("#the-canvas canvas").remove();currPagec=1;numPages=0;thePDF=null;n.toLowerCase().match(/\.(jpg|jpeg|png|gif|bmp|img)$/)?(r=document.createElement("img"),$(r).attr("src",urlpdf),document.getElementById("the-canvas").appendChild(r)):n.toLowerCase().match(/\.(doc|docx|xls|xlsx|pdf)$/)?renderPDF(urlpdf):(i=document.createElement("a"),$(i).html('<h3 style="height:70px">Click vào đây để tải về file: '+n+"<\/h3>"),$(i).attr("href",urldownload),document.getElementById("the-canvas").appendChild(i));hideLoading();ShowPopUP("idOverlayShowAttachFile","idPopupShowAttachFile")})}function renderPDF(n){PDFJS.getDocument(n).then(function(n){thePDF=n;numPages=n.numPages;n.getPage(1).then(handlePages)})}function handlePages(n){var i=n.getViewport(1.5),t=document.createElement("canvas"),r;t.style.display="block";r=t.getContext("2d");t.height=i.height;t.width=i.width;n.render({canvasContext:r,viewport:i});document.getElementById("the-canvas").appendChild(t);currPagec++;thePDF!==null&&currPagec<=numPages&&thePDF.getPage(currPagec).then(handlePages)}function parseJsonDate(n){var u=n.substr(6),t=new Date(parseInt(u)),i=t.getMonth()+1,r=t.getDate(),f=t.getFullYear();return(r<10?"0"+r:r)+"/"+(i<10?"0"+i:i)+"/"+f}function preventBack(){window.history.forward()}function LogOutSystem(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++)Cookies.remove(t[n].split("=")[0]);if(setTimeout("preventBack()",0),window.onunload=function(){null},window.history&&window.history.pushState){$(window).on("popstate",function(){var t=location.hash,i=t.split("#!/"),r=i[1],n;r!==""&&(n=window.location.hash,n===""&&alert("Back button was pressed."))});window.history.pushState("forward",null,"./dang-nhap")}window.location.href="/dang-xuat"}function ShowAlertify(n,t,i){i===undefined&&(i=3e3);timer!=null&&clearTimeout(timer);var r="<button onclick='CloseAlert(this);' type='button' class='close'  aria-label='Close'><span>×<\/span><\/button>";r+=t;$(".alert-top-setting > .alert-"+n+" > .cont").html(r);$(".alert-top-setting > .alert-"+n).show();timer=setTimeout(function(){$(".alert-top-setting > .alert-"+n).hide()},i)}function CloseAlert(n){$(n).parent().parent().hide()}function encodeDate(n){var i=n.substr(6),t=new Date(parseInt(i)),r=t.getMonth()+1,u=t.getDate(),f=t.getFullYear();return r+"/"+u+"/"+f}function checkPassword(n){var i=countContain(n,m_strUpperCase),r=countContain(n,m_strLowerCase),f=i+r,u=countContain(n,m_strNumber),t=0;return n.length>=8&&(t+=1),r>=1&&(t+=1),i>=1&&(t+=1),u>=1&&(t+=1),t}function countContain(n,t){var r=0;for(i=0;i<n.length;i++)t.indexOf(n.charAt(i))>-1&&r++;return r}function validateSpace(n){for(var i=n,t=0;t<specialspace.length;t++)if(i.indexOf(specialspace[t])>=0)return!1;return!0}function RefreshFunction(){$.ajax({url:"/account/RefreshFunction",type:"post",success:function(){ShowAlertify("success","Nạp lại quyền thành công!");setTimeout(function(){location.href="/dang-xuat"},1e3)},error:function(){}})}var validatetype={number:'[data-required="true"]'},objAjax,textpix="",timer=null,dates={nowStr:function(){var n=new Date,t=n.getMonth()+1;return n.getDate()+"/"+(t<10?"0"+t:t)+"/"+n.getFullYear()},nowStrTime:function(){var n=new Date,t=n.getMonth()+1;return dates.nowStr()+" "+n.getHours()+":"+n.getMinutes()},convert:function(n){return n.constructor===String&&(t=n.split("/"),n=t[1]+"/"+t[0]+"/"+t[2]),n.constructor===Date?n:n.constructor===Array?new Date(n[0],n[1],n[2]):n.constructor===Number?new Date(n):n.constructor===String?new Date(n):typeof n=="object"?new Date(n.year,n.month,n.date):NaN},compare:function(n,t){return isFinite(n=this.convert(n).valueOf())&&isFinite(t=this.convert(t).valueOf())?(n>t)-(n<t):NaN},compareDays:function(n,t,i){return isFinite(n=this.convert(n).valueOf())&&isFinite(t=this.convert(t).valueOf())&&t>n?t-n-i:NaN},compareTime:function(n,t){return(t1=n.split(" "),t2=t.split(" "),r=dates.compare(t1[0],t2[0]),r==0)?(v1=parseInt(t1[1].replace(":","")),v2=parseInt(t2[1].replace(":","")),(v1>v2)-(v1<v2)):r},inRange:function(n,t,i){return isFinite(n=this.convert(n).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(i=this.convert(i).valueOf())?t<=n&&n<=i:NaN}},objGlobal,objCookie,objCommon,specialspace;(function(){var t,n,i;$('select[data-select="true"]').on("change",function(){if(parseInt($(this).find("option:selected").val())!=-1||$(this).find("option:selected").val()!=""){$(this).css("border-color","#CCC");var n=$(this).parent();n.find(".ui-combobox").length>0&&n.find(".ui-combobox").find("input").css("border-color","#CCC")}});$('[data-required="true"]').on("keyup",function(){$(this).val().length>0&&$(this).removeClass("input-validation-error")});$('[data-email="true"]').on({keyup:function(){var n=new Global;$(this).val().trim()==""||n.isEmail($(this).attr("id"))?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error")},focusout:function(){var n=new Global;$(this).val().trim()==""||n.isEmail($(this).attr("id"))?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error")}});$('[data-number="true"]').on("keyup",function(){objGlobal=new Global;$(this).val().trim().length==0?$(this).data("emty")!=undefined?$(this).val($(this).data("")):$(this).data("numini")!=undefined?$(this).val(""):$(this).val(""):!objGlobal.isNumber($(this).val().trim())&&$(this).val().trim().length>0?$(this).data("emty")!=undefined?$(this).val($(this).data("")):$(this).data("numini")!=undefined?$(this).val($(this).data("")):$(this).val(parseInt("0"+$(this).val(),10)):$(this).data("emty")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("")):$(this).data("numini")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("numini")):$(this).val($(this).val(),10)});$('[data-format-phone="true"]').on({keyup:function(){var r=new Global,t="",n,i;if($(this).val().length==0){$(this).removeClass("input-validation-error");return}if(n=$(this).val().replace(/-/g,"").substr(0,10),!r.isNumber(n)){$(this).val("");return}t+=n.length>=4&&n.length<7?n.substr(0,3)+"-"+n.substr(3):n.length>=7?n.substr(0,3)+"-"+n.substr(3,3)+"-"+n.substr(6):n;i=new RegExp(/^([0-9]{3,3})+\-([0-9]{3,3})+\-([0-9]{4,4})$/);i.test(t.trim())?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error");$(this).val(t)},focusout:function(){var r=new Global,t="",n,i;if($(this).val().length==0){$(this).removeClass("input-validation-error");return}if(n=$(this).val().replace(/-/g,"").substr(0,10),!r.isNumber(n)){$(this).val("");return}t+=n.length>=4&&n.length<7?n.substr(0,3)+"-"+n.substr(3):n.length>=7?n.substr(0,3)+"-"+n.substr(3,3)+"-"+n.substr(6):n;i=new RegExp(/^([0-9]{3,3})+\-([0-9]{3,3})+\-([0-9]{4,4})$/);i.test(t.trim())?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error");$(this).val(t)}});$('[data-currency="true"]').on("keyup",function(){if(objGlobal=new Global,isNaN(parseFloat($(this).val().replace(/,/gi,""))))parseInt($(this).val().replace(/,/gi,""))<0?$(this).val("0"):$(this).val("0");else{var n=parseFloat($(this).val().replace(/,/gi,"")).toString();$(this).val(objGlobal.currencyToString(n,","))}});$('[data-currency="true"]').on("focusout",function(){$(this).val().toString().trim()==""&&$(this).val("0")});$('[data-key-num="true"]').on("keyup",function(){var n=$(this).val().length;$("#"+$(this).data("label")).text(n)});$('[data-filter-java="true"]').on("focusout",function(){objGlobal=new Global;var n=$(this).val().trim();n=objGlobal.filterJavaScript(n);$(this).val(n)});$('[data-expanse="true"]').on("click",function(){var n=$(this);$("#"+$(this).data("element")).slideToggle("fast",function(){})});$('[data-date="true"]').on({keyup:function(){var n=new Global;$(this).val().trim()==""||n.valiDateFormat($(this).val())?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error")},focusout:function(){$(this).keyup()},change:function(){$(this).keyup()}});$('[data-time="true"]').on({keyup:function(){/^(?:(0[0-9]|1[0-9]|2[0123])+\:(0[0-9]|[12345][0-9]))$/.test($(this).val().trim())||$(this).val().trim()==""?$(this).removeClass("input-validation-error"):$(this).addClass("input-validation-error")},focusout:function(){$(this).keyup()},change:function(){$(this).keyup()}});$('[data-daysupply-number="true"]').on("keyup",function(){objGlobal=new Global;$(this).val().trim().length==0?$(this).data("emty")!=undefined?$(this).val($(this).data("")):$(this).data("numini")!=undefined?$(this).val(""):$(this).val(""):!objGlobal.isNumber($(this).val().trim())&&$(this).val().trim().length>0?$(this).data("emty")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("")):$(this).data("numini")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("numini")):$(this).val(parseInt("0"+$(this).val(),10)):parseInt($(this).val(),10)>0&&parseInt("0"+$(this).val(),10)<1e3?($(this).val(parseInt($(this).val(),10)),$(this).attr("error-validate","false")):($(this).attr("error-validate","true"),$(this).val($(this).data("")),$(this).addClass("input-validation-error"))});$('[data-refill-number="true"]').on("keyup",function(){objGlobal=new Global;$(this).val().trim().length==0?$(this).val(""):!objGlobal.isNumber($(this).val().trim())&&$(this).val().trim().length>0?$(this).data("emty")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("")):$(this).data("numini")!=undefined&&parseInt("0"+$(this).val(),10)==0?$(this).val($(this).data("numini")):$(this).val(parseInt("0"+$(this).val(),10)):parseInt($(this).val())<100?($(this).val(parseInt($(this).val(),10)),$(this).attr("error-validate","false")):($(this).attr("error-validate","true"),$(this).addClass("input-validation-error"),$(this).val(""))});$('[data-quantity-suarescript="true"]').on({keyup:function(){var t=new Global,n=$(this).val();if(isNaN(parseFloat(n))){$(this).val("");$(this).attr("error-validate","true");$(this).addClass("input-validation-error");return}if(n==""){$(this).attr("error-validate","true");$(this).addClass("input-validation-error");return}if(!t.validationQuantitySurescript(n)){if(n=="."){$(this).val("");$(this).attr("error-validate","true");$(this).addClass("input-validation-error");return}$(this).val(parseFloat($(this).val()));$(this).attr("error-validate","true");$(this).addClass("input-validation-error");return}n.indexOf(".")>-1&&n.length>11?($(this).val(n.substr(0,11)),$(this).attr("error-validate","false")):n.indexOf(".")==-1&&n.length>10?($(this).val(n.substr(0,10)),$(this).attr("error-validate","false")):n.indexOf(".")==10?($(this).val(n.substr(0,10)),$(this).attr("error-validate","false")):($(this).val(n),$(this).attr("error-validate","false"))},focusout:function(){$(this).keyup();var n=$(this).val();if(n==""){$(this).attr("error-validate","true");$(this).addClass("input-validation-error");return}n=parseFloat(n).toString();n==0?($(this).attr("error-validate","true"),$(this).addClass("input-validation-error"),n=""):$(this).attr("error-validate","false");$(this).val(n)}});if($("#cboComboCurrentClass").change(function(){var t=$(this).val(),n={};n.intClassID=t;$.ajax({url:"/aj/Home/GenHTMLComboSchoolClassSetting",type:"POST",data:n,success:function(n){var t='<option value="-1">-- Chọn lớp học --<\/option>';t+=n.htmlschoolclass;$("#cboComboCurrentSchoolClass").html(t)},error:function(){}})}),$("li[data-name='menu1']").each(function(){$(this).click(function(){var n=$(this).attr("data-id");$("li[data-name='menu1']").each(function(){$(this).removeClass("active")});$(this).hasClass("acitve")||($(this).addClass("active"),$("#divsubmenu").removeClass("hide"),$("li[data-name='menu2']").each(function(){$(this).addClass("hide")}),$("li[data-name='menu2'][data-parentid='"+n+"']").each(function(){$(this).removeClass("hide")}))})}),$("li[data-nameleft='menu1']").each(function(){$(this).click(function(){if($("li[data-nameleft='menu1']").removeClass("hide"),!$(this).hasClass("hide")){$(this).addClass("hide");var n=$(this).attr("data-id"),t=$(this).attr("data-parentid"),i=$(this).attr("data-node"),r=$(this).attr("data-classcss"),u=$(this).attr("data-namemenu"),f="<a style='cursor:pointer' data-count='0' id='dLabel' data-id='"+n+"' data-parentid='"+t+"' data-node='"+i+"'  class='current-items arootmenu'><span class='icon-menu'><i class='"+r+"'><\/i><\/span>"+u+"<span class='fa fa-unsorted'><\/span><\/a>";$("#divrootmenuleft #dLabel").length>0&&$("#dLabel").remove();$("#divrootmenuleft").append(f);$("#divrootmenuleft").removeClass("open");$("div[data-nameleft='menu2']").addClass("hide");$("div[data-nameleft='menu2'][data-parentid='"+n+"']").removeClass("hide");InitMenu3Left();InitMenu1Click()}})}),t="",dataidtab!=""&&node!="")if($("body").hasClass("menuOnTop")){for(n=node;n>0;n--)$("[data-name='menu"+n+"'][data-id='"+dataidtab+"']").length>0&&($("[data-name='menu"+n+"'][data-id='"+dataidtab+"']").addClass("active"),$("[data-name='menu"+n+"'][data-id='"+dataidtab+"']").removeClass("hide"),t=$("[data-name='menu"+n+"'][data-id='"+dataidtab+"']").attr("data-parentid"),$("[data-name='menu"+n+"'][data-parentid='"+t+"']").removeClass("hide"),dataidtab=$("[data-name='menu"+n+"'][data-id='"+dataidtab+"']").attr("data-parentid"));$("#divsubmenu").removeClass("hide")}else i=dataidtab,BindMenuLeft(),InitMenu1Click();$("a[data-name='switchMenu']").each(function(){$(this).click(function(){var n=$(this).attr("data-value"),t={value:n};$.ajax({url:"/home/SetSessionMenu",type:"post",data:t,success:function(){window.location.href=window.location.href},error:function(){window.location.href=window.location.href}})})})})();Global.prototype.callBack="";Global.prototype.isHandlerCallBack=!1;Global.prototype.checkTaxCode=function(n){var r,i,t;if(n=n.substr(0,10),this.isNumber(n)){for(r=[31,29,23,19,17,13,7,5,3],i=0,t=0;t<n.length-1;t++)i+=parseInt(n.substr(t,1))*r[t];return parseInt(n.substr(9,1))==10-i%11?!0:!1}return!1};Global.prototype.isNumber=function(n){var t=new RegExp(/^ *[0-9]+ *$/);return n.trim().length>0&&t.test(n.trim())?!0:!1};Global.prototype.isMobile=function(n){var t=new RegExp(/^ *[0-9]+ *$/);return n.trim().length>9&&t.test(n.trim())?!0:!1};Global.prototype.isPID=function(n){var t=new RegExp(/^ *[0-9]+ *$/);return n.trim().length>8&&t.test(n.trim())?!0:!1};Global.prototype.requireInput=function(){return arguments.length==1&&$("#"+arguments[0]).length>0?$("#"+arguments[0]).val().toString().trim().length>0:arguments.length==2&&$("#"+arguments[0]).length>0?$("#"+arguments[0]).val().trim()!=""&&$("#"+arguments[0]).val().trim()!=arguments[1].trim():!1};Global.prototype.currencyToString=function(n,t){var e,o,r;if(n.trim().length>0){for(var i=n.trim().length,u="",f=n.trim(),r="";i>3;)f=n.trim().substring(0,i-3),e=i-3,o=n.trim().substring(e,i),i-=3,r=u,u=t+o+r;return r=u,f+r}return""};Global.prototype.isEmail=function(n){var i=new RegExp(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/),t;return $("#"+n).length>0&&(t=$("#"+n).val(),i.test(t.trim()))?!0:!1};Global.prototype.checkCharSpecial=function(n){var i=new RegExp(/^ *[a-zA-Z_0-9\s]+ *$/),t;return $("#"+n).length>0&&(t=$("#"+n).val(),i.test(t.trim()))?!0:!1};Global.prototype.requireListInput=function(){for(var n=0;n<arguments.length;n++)if(!this.requireInput(arguments[n]))return!1;return!0};Global.prototype.focus=function(n,t){$(n).val().trim()==t&&$(n).val("")};Global.prototype.blur=function(n,t){$(n).val().trim()==""&&$(n).val(t)};Global.prototype.showPopup=function(n,t,i){i==!0&&$("#"+t).css({top:($(window).height()-$("#"+t).outerHeight())/2});$("#"+n).fadeIn("fast",function(){$("#"+t).fadeIn("fast",function(){})})};Global.prototype.closePopup=function(n,t){$("#"+t).fadeOut("fast",function(){$("#"+n).fadeOut("fast")})};Global.prototype.showMess=function(n,t,i){var r="",u='style="display:block;"';i==!1&&(u='style="display:none;"');r+='<div class="pu-bg" id="pu-bg">';r+="<\/div>";r+='<div class="pu-main" id="pu-main-content">';r+='<div class="close-pu" '+u+' onclick="closeMessGlobal();">';r+="<\/div>";r+='<div class="j-title" draggable="true">'+n+"<\/div>";r+='<div class="j-content">';r+=t;r+="<\/div>";(i==undefined||i==!0)&&(r+='<div class="j-btn-close">',r+='<div class="right"> ',r+='<input type="submit" class="rgt-btn" value="OK"  onclick="closeMessGlobal();"/>',r+=" <\/div>",r+='<div class="clr">',r+=" <\/div>",r+="<\/div>");r+="<\/div>";$("body").append(r);$("#pu-main-content").css({left:($(window).width()-$("#pu-main-content").outerWidth())/2});$("#pu-bg").fadeIn("fast",function(){$("#pu-main-content").fadeIn("fast")})};Global.prototype.showLoading=function(){};Global.prototype.closeMess=function(){$("#pu-main-content").fadeIn("fast",function(){$("#pu-bg").fadeIn("fast",function(){$("#pu-main-content").remove();$("#pu-bg").remove()})});this.isHandlerCallBack==!0&&(this.callBack(),this.isHandlerCallBack=!1)};Global.prototype.deTectBrowser=function(){var n=navigator.userAgent;return n.toLowerCase().indexOf("chrome")>-1?"chrome":n.toLowerCase().indexOf("firefox")>-1?"firefox":n.toLowerCase().indexOf("opera")>-1?"opera":"undefined"};Global.prototype.compareDate=function(n,t,i,r){var f,u;i==null&&(i="dd/mm/yyyy");r==null&&(r="/");i=i.toLowerCase();var e=0,o=0,s=0,v=i.split(" "),h=v[0].split(r),c="",a,l;try{for(f=0;f<h.length;f++)h[f].indexOf("d")>-1&&(e=f),h[f].indexOf("m")>-1&&(o=f),h[f].indexOf("y")>-1&&(s=f);return c=$("#"+n).length>0?$("#"+n).val():n,arrDateCompare=c.split(" "),u=arrDateCompare[0].split(r),a=arrDateCompare.length==1?new Date(u[o]+"/"+u[e]+"/"+u[s]):new Date(u[o]+"/"+u[e]+"/"+u[s]+" "+arrDateCompare[1]),t==null?l=new Date:(c=$("#"+t).length>0?$("#"+t).val():t,arrDateCompare=c.split(" "),u=arrDateCompare[0].split(r),l=arrDateCompare.length==1?new Date(u[o]+"/"+u[e]+"/"+u[s]):new Date(u[o]+"/"+u[e]+"/"+u[s]+" "+arrDateCompare[1])),a.getTime()>=l.getTime()}catch(y){return!1}};Global.prototype.compareDay=function(n,t,i,r,u){var e;r==null&&(r="dd/mm/yyyy");u==null&&(u="/");r=r.toLowerCase();var h=0,c=0,l=0,o=r.split(" "),f=o[0].split(u),s="",a,v;try{for(e=0;e<f.length;e++)f[e].indexOf("d")>-1&&(h=e),f[e].indexOf("m")>-1&&(c=e),f[e].indexOf("y")>-1&&(l=e);return s=$("#"+n).length>0?$("#"+n).val():n,o=s.split(" "),f=o[0].split(u),a=parseInt(f[l]*365)+parseInt(f[c]*30)+parseInt(f[h]*1),s=$("#"+t).length>0?$("#"+t).val():t,o=s.split(" "),f=o[0].split(u),v=parseInt(f[l]*365)+parseInt(f[c]*30)+parseInt(f[h]*1),a-v<=i}catch(y){return!1}};Global.prototype.valiDateFormat=function(n){return/^(?:(0[1-9]|1[012])[\/.](0[1-9]|[12][0-9]|3[01])[\/.](19|20)[0-9]{2})$/.test(n)};Global.prototype.validationSelect=function(n){for(var i,u=!0,r=-1,t=0;t<n.length;t++)parseInt($("#"+n[t]).find("option:selected").val())==-1||$("#"+n[t]).find("option:selected").val()==undefined||$("#"+n[t]).find("option:selected").val()==""?($("#"+n[t]).css("border-color","red"),$("#"+n[t]).attr("error-require","true"),i=$("#"+n[t]).parent(),i.find(".ui-combobox").length>0&&(i.find(".ui-combobox").find("input").css("border-color","red"),i.find(".ui-combobox").find("input").focus()),u=!1,t==-1&&(r=t)):$("#"+n[t]).attr("error-require","false");return r>-1&&$("#"+n[r]).focus(),u};Global.prototype.validation=function(n){for(var r=!0,i=-1,t=0;t<n.length;t++)this.requireInput(n[t])?($("#"+n[t]).attr("error-require","false"),$("#"+n[t]).css("border-color","none")):($("#"+n[t]).addClass("input-validation-error"),$("#"+n[t]).attr("error-require","true"),r=!1,i==-1&&(i=t));return i>-1&&$("#"+n[i]).focus(),r};Global.prototype.validationPhone=function(n){for(var u,r=!0,i=-1,f=new RegExp(/^([0-9]{3,3})+\-([0-9]{3,3})+\-([0-9]{4,4})$/),t=0;t<n.length;t++)u=$("#"+n[t]).val(),f.test(u.trim())||($("#"+n[t]).addClass("input-validation-error"),r=!1,i==-1&&(i=t));return i>-1&&$("#"+n[i]).focus(),r};Global.prototype.validationEmail=function(n){for(var r=!0,i=-1,t=0;t<n.length;t++)this.isEmail(n[t])||($("#"+n[t]).addClass("input-validation-error"),r=!1,i==-1&&(i=t));return i>-1&&$("#"+n[i]).focus(),r};Global.prototype.validationQuantitySurescript=function(n){var t=!0,i=new RegExp(/^[0-9]+(\.([0-9]{1,10})?)?$/);return i.test(n.trim())||(t=!1),t};Global.prototype.aJaxCall=function(n,t,i,r,u,f){objGlobal=new Global;objAjax!=null&&objAjax.abort();(u==undefined||u==null)&&(u=function(){return objGlobal.closeMess()});objAjax=$.ajax({type:t,url:n,cache:!1,traditional:!0,beginSend:r,data:i,success:function(n){u(n)},error:function(n){f!=undefined&&f!=null&&f(n);hideLoading()},complete:function(n){n.status===302&&reSetLogin();hideLoading()}})};Global.prototype.aJaxCallJSON=function(n,t,i,r,u){(i==undefined||i==null)&&(i=function(){return objGlobal.showLoading()});(r==undefined||i==null)&&(r=function(){return objGlobal.closeMess()});$.ajax({type:"POST",url:n,cache:!1,contentType:"application/json",traditional:!0,beginSend:i(),data:t,success:function(n){r(n)},error:function(){u!=undefined&&u!=null&&u()},complete:function(n){n.status===302&&reSetLogin()}})};Global.prototype.colorToRGB=function(n){if(n.substr(0,1)==="#")return n;var t=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(n),i=parseInt(t[2]),r=parseInt(t[3]),u=parseInt(t[4]),f=u|r<<8|i<<16;return[i,r,u]};Global.prototype.addData=function(n){for(var t=0;t<n.length;t++)$("#"+n[t][0]).data("data",n[t][1])};Global.prototype.filterJavaScript=function(n){for(var r=new RegExp(/javacsript|onload|onclick|onblur|onfocus|var|script/gi),i=["javacsript","onload","onclick","onblur","onfocus","var","script"],t;r.test(n.trim());)for(t=0;t<i.length;t++)n.toLowerCase().indexOf(i[t])>-1&&(n=this.replaceJava(n,i[t],n.toLowerCase().indexOf(i[t])));return n};Global.prototype.replaceJava=function(n,t,i){for(var r,s,e=0,o=i,f=i+t.length,u=i;u>0;u--)if(n.substring(u,u-1)=="<"||n.substring(u,u-1)=="&lt;"||n.substring(u,u+1)=="<\/"||n.substring(u,u+1)=="/&lt;"){o=u-1;break}for(r=i;r<n.length;r++)if((n.substring(r,r+1)=="/>"||n.substring(r,r+1)=="/&gt;")&&e==0){f=r+1;break}if(f==-1)for(r=i;r<n.length;r++)if((n.substring(r,r+1)==">"||n.substring(r,r+1)=="&gt;")&&e==0){f=r+1;break}return s=n.substring(o,f),n.replace(s,"")};Cookie.prototype.set=function(n,t,i){var u=new Date,r;u.setDate(u.getDate()+i);r=new Date;r.setMonth(r.getMonth()+12);document.cookie=n+"="+t+(i==null?"; expires="+r+";path=/":"; expires="+u.toUTCString()+";path=/")};Cookie.prototype.get=function(n){return document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1)?(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),document.cookie.substring(c_start,c_end)):""};Cookie.prototype.update=function(n,t){var i,r,u;document.cookie.length>0&&(c_start=document.cookie.indexOf(n+"="),c_start!=-1&&(c_start=c_start+n.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),i=document.cookie.substring(c_start,c_end),document.cookie.replace(i,t),r=n+"=",u=document.cookie.substring(c_end,document.cookie.length),document.cookie=r+t+u))};Cookie.prototype.clear=function(n){Cookie.prototype.set(n,"",-1)};objGlobal=function(){};objGlobal.prototype=Global.prototype;Common.prototype.Global=new objGlobal;objCookie=function(){};objCookie.prototype=Cookie.prototype;Common.prototype.Cookie=new objCookie;objCommon=function(){};objCommon.prototype=Common.prototype;JWeblib.prototype.common=new objCommon;var currPagec=1,numPages=0,thePDF=null,urlpdf="",urldownload="";var m_strUpperCase="ABCDEFGHIJKLMNOPQRSTUVWXYZ",m_strLowerCase="abcdefghijklmnopqrstuvwxyz",m_strNumber="0123456789",m_strCharacters="!@#$%^&*?_~";specialspace=[" "];